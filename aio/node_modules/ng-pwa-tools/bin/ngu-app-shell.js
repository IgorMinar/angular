#!/usr/bin/env node_modules/.bin/ts-node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var minimist = require("minimist");
var args_1 = require("../lib/common/args");
var util_1 = require("../lib/common/util");
var app_shell_1 = require("../lib/app-shell");
var fs = require("fs");
var args = minimist(process.argv.slice(2), {
    string: ['module', 'index', 'lazy-root', 'pre-module', 'out'],
});
args_1.requiredArgs(args, ['module', 'index', 'lazy-root']);
var appModule = util_1.toAbsolute(args['module']);
var index = util_1.toAbsolute(args['index']);
var loadChildrenRoot = util_1.toAbsolute(args['lazy-root']);
var shellArgs = { appModule: appModule, index: index, loadChildrenRoot: loadChildrenRoot };
if (args['pre-module']) {
    shellArgs.beforeAppModule = util_1.toAbsolute(args['pre-module']);
}
app_shell_1.generateAppShell(shellArgs)
    .then(function (html) {
    if (args['out']) {
        var out = util_1.toAbsolute(args['out']);
        fs.writeFileSync(out, html);
    }
    else {
        console.log(html);
    }
});
